# Secret Template Reference
# =============================================================================
# This file documents the expected secrets structure.
# DO NOT store actual secret values here.
# Secrets should be created using scripts/create-secrets.sh
# =============================================================================

# Backend Secrets (required)
# kubectl create secret generic todo-backend-secrets \
#   --namespace todo-dev \
#   --from-literal=DATABASE_URL='postgresql://...' \
#   --from-literal=OPENAI_API_KEY='sk-...' \
#   --from-literal=JWT_SECRET='...'

# Expected secret structure:
# apiVersion: v1
# kind: Secret
# metadata:
#   name: todo-backend-secrets
#   namespace: todo-dev
# type: Opaque
# data:
#   DATABASE_URL: <base64-encoded>
#   OPENAI_API_KEY: <base64-encoded>
#   JWT_SECRET: <base64-encoded>

---
# Placeholder ConfigMap to ensure the chart has something to deploy
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "todo-infrastructure.fullname" . }}-secrets-info
  labels:
    {{- include "todo-infrastructure.labels" . | nindent 4 }}
data:
  README: |
    Secrets are managed externally via scripts/create-secrets.sh

    Required secrets:
    - todo-backend-secrets:
      - DATABASE_URL: Neon PostgreSQL connection string
      - OPENAI_API_KEY: OpenAI API key
      - JWT_SECRET: JWT signing secret (min 32 chars)

    Create secrets:
      ./scripts/create-secrets.sh

    Verify secrets:
      kubectl get secret todo-backend-secrets -n todo-dev
